{"version":3,"file":"header.module.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/header/src/scripts/header/constants.js","../../packages/header/src/scripts/header/header.js","../../packages/header/index.js","../../packages/header/src/scripts/header/build.js","../../packages/header/src/scripts/module.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import api from '../../../api.js';\n\nexport const HEADER_SELECTOR = api.core.ns.selector('header');\nexport const HEADER_TOOLS_SELECTOR = api.core.ns.selector('header__tools');\nexport const HEADER_SEARCH_BAR_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.core.ns.selector('search-bar')}`;\nexport const HEADER_SHORTCUTS_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.core.ns.selector('shortcuts')}`;\nexport const HEADER_NAV_SELECTOR = api.core.ns.selector('nav');\nexport const HEADER_NAV_LIST_SELECTOR = `${HEADER_NAV_SELECTOR} ${api.core.ns.selector('nav__list')}`;\n","import api from '../../../api.js';\nimport {\n  HEADER_NAV_LIST_SELECTOR,\n  HEADER_NAV_SELECTOR,\n  HEADER_SEARCH_BAR_SELECTOR,\n  HEADER_SELECTOR,\n  HEADER_SHORTCUTS_SELECTOR,\n  HEADER_TOOLS_SELECTOR\n} from './constants';\n\nlet count = 0;\n\nclass Header {\n  constructor (header) {\n    this.header = header || document.querySelector(HEADER_SELECTOR);\n    this.numId = count;\n    count++;\n    this.modals = [];\n\n    this.init();\n  }\n\n  getModal (element) {\n    if (!element) return;\n    const modals = api.core.Instance.getInstances(element, api.Modal);\n    if (!modals || !modals.length) return;\n    this.modals.push(modals[0]);\n  }\n\n  init () {\n    this.tools = this.header.querySelector(HEADER_TOOLS_SELECTOR);\n    this.getModal(this.tools);\n\n    this.searchBar = this.header.querySelector(HEADER_SEARCH_BAR_SELECTOR);\n\n    this.nav = this.header.querySelector(HEADER_NAV_SELECTOR);\n    this.getModal(this.nav);\n\n    this.shortcuts = this.header.querySelector(HEADER_SHORTCUTS_SELECTOR);\n\n    this.navList = this.header.querySelector(HEADER_NAV_LIST_SELECTOR);\n\n    this.changing = this.change.bind(this);\n\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    this.isLarge = window.matchMedia('(min-width: 62em)').matches;\n\n    if (this.isLarge) {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].conceal();\n        this.modals[i].element.style.transition = 'none';\n      }\n    } else {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].element.style.transition = '';\n      }\n    }\n\n    if (this.shortcuts !== null) {\n      if (this.isLarge) {\n        if (this.searchBar !== null) this.tools.insertBefore(this.shortcuts, this.searchBar);\n        else this.tools.appendChild(this.shortcuts);\n      } else {\n        this.nav.insertBefore(this.shortcuts, this.navList);\n      }\n    }\n  }\n}\n\nexport { Header };\n","import api from './api.js';\nimport { Header } from './src/scripts/header/header';\n\napi.Header = Header;\n","import { Header } from './header.js';\nimport { HEADER_SELECTOR } from './constants';\n\nconst build = () => {\n  const elements = Array.prototype.slice.call(document.querySelectorAll(HEADER_SELECTOR));\n\n  const headers = [];\n\n  for (const element of elements) headers.push(new Header(element));\n};\n\nexport { build };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { HEADER_SELECTOR } from './header/constants.js';\nimport { build } from './header/build.js';\n\nnew api.core.Initializer(HEADER_SELECTOR, [build]);\n"],"names":[],"mappings":";;AACO,MAAM,SAAS,GAAG,MAAM;;ACC/B,MAAM,GAAG,GAAG,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC;AAC9C,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG;;ACDhB,MAAM,eAAe,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACvD,MAAM,qBAAqB,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;AACpE,MAAM,0BAA0B,GAAG,CAAC,EAAE,qBAAqB,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;AACpG,MAAM,yBAAyB,GAAG,CAAC,EAAE,qBAAqB,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;AAClG,MAAM,mBAAmB,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AACxD,MAAM,wBAAwB,GAAG,CAAC,EAAE,mBAAmB,CAAC,CAAC,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC;;ACGrG,IAAI,KAAK,GAAG,CAAC,CAAC;AACd;AACA,MAAM,MAAM,CAAC;AACb,EAAE,WAAW,CAAC,CAAC,MAAM,EAAE;AACvB,IAAI,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;AACpE,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACvB,IAAI,KAAK,EAAE,CAAC;AACZ,IAAI,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;AACrB;AACA,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;AAChB,GAAG;AACH;AACA,EAAE,QAAQ,CAAC,CAAC,OAAO,EAAE;AACrB,IAAI,IAAI,CAAC,OAAO,EAAE,OAAO;AACzB,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC,KAAK,CAAC,CAAC;AACtE,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO;AAC1C,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC,GAAG;AACH;AACA,EAAE,IAAI,CAAC,GAAG;AACV,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,qBAAqB,CAAC,CAAC;AAClE,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC9B;AACA,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,0BAA0B,CAAC,CAAC;AAC3E;AACA,IAAI,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;AAC9D,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC5B;AACA,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,yBAAyB,CAAC,CAAC;AAC1E;AACA,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,wBAAwB,CAAC,CAAC;AACvE;AACA,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3C;AACA,IAAI,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrD,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;AAClB,GAAG;AACH;AACA,EAAE,MAAM,CAAC,GAAG;AACZ,IAAI,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAC,OAAO,CAAC;AAClE;AACA,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;AACtB,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnD,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;AACjC,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,MAAM,CAAC;AACzD,OAAO;AACP,KAAK,MAAM;AACX,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnD,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,EAAE,CAAC;AACrD,OAAO;AACP,KAAK;AACL;AACA,IAAI,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;AACjC,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;AACxB,QAAQ,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;AAC7F,aAAa,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACpD,OAAO,MAAM;AACb,QAAQ,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;AAC5D,OAAO;AACP,KAAK;AACL,GAAG;AACH;;ACpEA,GAAG,CAAC,MAAM,GAAG,MAAM;;ACAnB,MAAM,KAAK,GAAG,MAAM;AACpB,EAAE,MAAM,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC,CAAC;AAC1F;AACA,EAAE,MAAM,OAAO,GAAG,EAAE,CAAC;AACrB;AACA,EAAE,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC;AACpE,CAAC;;ACTD;AAIA;AACA,IAAI,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC,KAAK,CAAC,CAAC"}