{"version":3,"file":"dsfr.nomodule.min.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/core/src/scripts/global/namespace.js","../../packages/core/src/scripts/manipulation/classes.js","../../packages/core/src/scripts/engine/render/renderer.js","../../packages/core/src/scripts/engine/engine.js","../../packages/core/src/scripts/global/initializer.js","../../packages/core/src/scripts/engine/instantiate/instance.js","../../packages/core/src/scripts/disclosure/constants.js","../../packages/core/src/scripts/disclosure/disclosures-group.js","../../packages/core/src/scripts/disclosure/disclosure-button.js","../../packages/core/src/scripts/disclosure/events.js","../../packages/core/src/scripts/disclosure/disclosure.js","../../packages/core/src/scripts/disclosure/disclosure-types.js","../../packages/core/src/scripts/key-listener/key-listener.js","../../packages/core/src/scripts/collapse/constants.js","../../packages/core/src/scripts/collapse/collapse.js","../../packages/core/src/scripts/manipulation/size.js","../../packages/core/index.js","../../packages/core/src/scripts/module.js","../../packages/core/src/scripts/collapse/build.js","../../packages/accordions/src/scripts/accordion/constants.js","../../packages/accordions/src/scripts/accordion/accordions-group.js","../../packages/accordions/index.js","../../packages/accordions/src/scripts/module.js","../../packages/breadcrumb/src/scripts/breadcrumb/constants.js","../../packages/breadcrumb/src/scripts/breadcrumb/breadcrumb.js","../../packages/breadcrumb/src/scripts/module.js","../../packages/breadcrumb/src/scripts/breadcrumb/build.js","../../packages/buttons/src/scripts/buttons/constants.js","../../packages/buttons/src/scripts/module.js","../../packages/buttons/src/scripts/buttons/build.js","../../packages/modal/src/scripts/modal/constants.js","../../packages/modal/src/scripts/modal/focus-trap.js","../../packages/modal/src/scripts/modal/modals-group.js","../../packages/modal/src/scripts/modal/modal.js","../../packages/modal/index.js","../../packages/modal/src/scripts/module.js","../../packages/modal/src/scripts/modal/build.js","../../packages/navigation/src/scripts/navigation/constants.js","../../packages/navigation/src/scripts/navigation/navigation.js","../../packages/navigation/index.js","../../packages/navigation/src/scripts/module.js","../../packages/schemes/src/scripts/scheme/constants.js","../../packages/schemes/src/scripts/scheme/scheme.js","../../packages/schemes/index.js","../../packages/schemes/src/scripts/switch-theme/constants.js","../../packages/schemes/src/scripts/switch-theme/switch-theme.js","../../packages/schemes/src/scripts/module.js","../../packages/schemes/src/scripts/scheme/build.js","../../packages/schemes/src/scripts/switch-theme/build.js","../../packages/sidemenu/src/scripts/sidemenu/constants.js","../../packages/sidemenu/src/scripts/module.js","../../packages/table/src/scripts/table/constants.js","../../packages/table/src/scripts/table/table.js","../../packages/table/index.js","../../packages/table/src/scripts/table/build.js","../../packages/table/src/scripts/module.js","../../packages/tabs/src/scripts/tabs/tab-button.js","../../packages/tabs/src/scripts/tabs/constants.js","../../packages/tabs/src/scripts/tabs/tabs-group.js","../../packages/tabs/src/scripts/tabs/tab.js","../../packages/tabs/index.js","../../packages/tabs/src/scripts/module.js","../../packages/tabs/src/scripts/tabs/build.js","../../packages/header/src/scripts/header/constants.js","../../packages/header/src/scripts/header/header.js","../../packages/header/index.js","../../packages/header/src/scripts/module.js","../../packages/header/src/scripts/header/build.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import { prefix, namespace } from '../../../generated/scripts/config.js';\n\nexport const ns = (name) => `${prefix}-${name}`;\n\nns.selector = (name, notation) => {\n  if (notation === undefined) notation = '.';\n  return `${notation}${ns(name)}`;\n};\n\nns.attr = (name, quoted, value) => `data-${ns(name)}`;\n\nns.attr.selector = (name, value) => {\n  let result = ns.attr(name);\n  if (value !== undefined) result += `=\"${value}\"`;\n  return `[${result}]`;\n};\n\nns.event = (type) => `${namespace}.${type}`;\n","const modifiyClass = (element, className, remove) => {\n  if (className.charAt(0) === '.') className = className.substr(1);\n  const classNames = element.className.split(' ');\n  const index = classNames.indexOf(className);\n  if (remove === true) {\n    if (index > -1) classNames.splice(index, 1);\n  } else if (index === -1) classNames.push(className);\n  element.className = classNames.join(' ');\n};\n\nconst addClass = (element, className) => modifiyClass(element, className);\n\nexport { addClass };\n\nconst removeClass = (element, className) => modifiyClass(element, className, true);\n\nexport { removeClass };\n","class Renderer {\n  constructor () {\n    this.closures = [];\n    this.nexts = [];\n    this.rendering = this.render.bind(this);\n    this.render();\n  }\n\n  add (closure) {\n    this.closures.push(closure);\n    const remove = () => {\n      const index = this.closures.indexOf(closure);\n      if (index !== -1) this.closures.splice(index, 1);\n    };\n    return remove;\n  }\n\n  next (closure, frame) {\n    frame = frame === undefined ? 0 : frame - 1;\n    if (this.nexts[frame] === undefined) this.nexts[frame] = [];\n    this.nexts[frame].push(closure);\n  }\n\n  render () {\n    window.requestAnimationFrame(this.rendering);\n    for (const closure of this.closures) closure.call();\n    const nexts = this.nexts.shift();\n    if (nexts) {\n      for (const closure of nexts) closure.call();\n    }\n  }\n}\n\nexport { Renderer };\n","import { Renderer } from './render/renderer';\n\n// TODO: initializer et renderer en 1, avec muttation observer pour ajouter et retirer les instances des objets attendus en fonctions de selecteurs spÃ©cifiques\nclass Engine {\n  constructor () {\n    this.renderer = new Renderer();\n    // this.instantier = new Instancier();\n  }\n\n  register (selector, factory) {\n\n  }\n\n  start () {\n    // this.renderer.start();\n  }\n\n  stop () {\n    // this.renderer.stop();\n  }\n}\n\nconst engine = new Engine();\n\nexport default engine;\n","class Initializer {\n  constructor (selector, builders) {\n    this.selector = selector;\n    this.builders = builders;\n    this.instances = [];\n\n    if (document.readyState !== 'loading') window.requestAnimationFrame(this.start.bind(this));\n    else document.addEventListener('DOMContentLoaded', this.start.bind(this));\n  }\n\n  start () {\n    if (this.instances.length > 0) return;\n\n    if (document.querySelectorAll(this.selector).length > 0) {\n      for (let i = 0; i < this.builders.length; i++) {\n        this.instances.push(this.builders[i]());\n      }\n    }\n  }\n}\n\nexport { Initializer };\n","const instances = { };\n\nclass Instance {\n  constructor (element, resizing) {\n    if (!instances[element]) instances[element] = [];\n    instances[element].push(this);\n    this.element = element;\n    this.id = element.id;\n    this.listeners = {};\n  }\n\n  dispatch (type, data) {\n    const event = new CustomEvent(type, data);\n    this.element.dispatchEvent(event);\n  }\n\n  listen (type, closure) {\n    if (!this.listeners[type]) this.listeners[type] = [];\n    if (this.listeners[type].indexOf(closure) > -1) return;\n    this.listeners[type].push(closure);\n    this.element.addEventListener(type, closure);\n  }\n\n  unlisten (type, closure) {\n    if (!type) {\n      for (const type in this.listeners) this.unlisten(type);\n    } else if (!closure) {\n      if (!this.listeners[type]) return;\n      for (const closure of this.listeners[type]) this.element.removeEventListener(closure);\n      this.listeners[type].length = 0;\n    } else {\n      if (!this.listeners[type]) return;\n      const index = this.listeners[type].indexOf(closure);\n      if (index > -1) this.listeners[type].splice(index, 1);\n      this.element.removeEventListener(closure);\n    }\n  }\n\n  resize () {}\n\n  destroy () {}\n\n  static getInstances (element, instanceClass) {\n    if (!instances[element]) return null;\n    else if (!instanceClass) return instances[element];\n    else return instances[element].filter((instance) => instance instanceof instanceClass);\n  }\n}\n\nexport { Instance };\n","import { ns } from '../global/namespace.js';\n\nexport const GROUP_ATTR = ns.attr('group');\n","import { GROUP_ATTR } from './constants.js';\n\nconst groups = [];\n\nclass DisclosuresGroup {\n  constructor (id, element) {\n    this.id = id;\n    this.element = element;\n    this.members = [];\n    this._index = -1;\n    this._current = null;\n    groups.push(this);\n  }\n\n  static getGroupById (id) {\n    for (const group of groups) if (group.constructor === this && group.id === id) return group;\n    return new this(id);\n  }\n\n  static getGroupByElement (element) {\n    for (const group of groups) if (group.element === element) return group;\n    return new this(false, element);\n  }\n\n  static groupById (member, groupConstructor) {\n    const id = member.element.getAttribute(GROUP_ATTR);\n    if (id === null) return;\n\n    const group = groupConstructor.getGroupById(id);\n    group.add(member);\n  }\n\n  static groupByParent (member, GroupConstructor, groupSelector) {\n    if (groupSelector === undefined) groupSelector = GroupConstructor.selector;\n    if (groupSelector === '') return;\n    let element = member.element.parentElement;\n\n    while (element) {\n      if (element.classList.contains(member.constructor.selector)) return;\n\n      if (element.classList.contains(groupSelector)) {\n        const group = GroupConstructor.getGroupByElement(element);\n        group.add(member);\n        return;\n      }\n      element = element.parentElement;\n    }\n  }\n\n  static get selector () { return ''; }\n\n  add (member) {\n    if (this.members.indexOf(member) !== -1) return;\n    this.members.push(member);\n    member.setGroup(this);\n\n    switch (true) {\n      case this.current !== null:\n      case !member.disclosed && !member.primal:\n        member.disclosed = false;\n        break;\n\n      default:\n        this._current = member;\n        this._index = this.members.indexOf(member);\n        member.disclosed = true;\n    }\n  }\n\n  get length () { return this.members.length; }\n\n  get index () { return this._index; }\n\n  set index (value) {\n    if (value < -1 || value >= this.length || this._index === value) return;\n    if (this.current !== null) this.current.conceal(true, true);\n    this._index = value;\n    this._current = this._index > -1 ? this.members[this._index] : null;\n    if (this.current !== null) this.current.disclose(true);\n    this.apply();\n  }\n\n  get current () { return this._current; }\n\n  set current (member) {\n    this.index = this.members.indexOf(member);\n  }\n\n  get hasFocus () {\n    if (this.current === undefined) return null;\n    return this.current.hasFocus;\n  }\n\n  apply () {}\n}\n\nexport { DisclosuresGroup };\n","class DisclosureButton {\n  constructor (element, disclosure) {\n    this.element = element;\n    this.disclosure = disclosure;\n    this.hasAttribute = this.element.hasAttribute(this.disclosure.attributeName);\n    this.element.addEventListener('click', this.click.bind(this));\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observe();\n  }\n\n  observe () {\n    this.observer.observe(this.element, { attributes: true });\n  }\n\n  click (e) {\n    this.disclosure.change(this.hasAttribute);\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === this.disclosure.attributeName) this.disclosure.change(this.disclosed);\n    });\n  }\n\n  apply (value) {\n    if (!this.hasAttribute) return;\n    if (this.observer) this.observer.disconnect();\n    this.element.setAttribute(this.disclosure.attributeName, value);\n    if (this.observer) this.observe();\n  }\n\n  get disclosed () {\n    return this.element.getAttribute(this.disclosure.attributeName) === 'true';\n  }\n\n  get hasFocus () {\n    return this.element === document.activeElement;\n  }\n}\n\nexport { DisclosureButton };\n","import { ns } from '../global/namespace.js';\n\nexport const DISCLOSE_EVENT = ns.event('DISCLOSE');\nexport const CONCEAL_EVENT = ns.event('CONCEAL');\n","import { DisclosuresGroup } from './disclosures-group.js';\nimport { DisclosureButton } from './disclosure-button.js';\nimport { addClass, removeClass } from '../manipulation/classes.js';\nimport { ns } from '../global/namespace.js';\nimport { Instance } from '../engine/instantiate/instance';\nimport { CONCEAL_EVENT, DISCLOSE_EVENT } from './events';\n\nconst disclosures = [];\n\nclass Disclosure extends Instance {\n  constructor (element) {\n    super(element);\n    this.buttons = [];\n    this._selector = this.constructor.selector;\n    this.modifier = this._selector + '--' + this.type.id;\n    this.attributeName = this.type.ariaState ? 'aria-' + this.type.id : ns.attr(this.type.id);\n    this.pristine = true;\n\n    const buttons = document.querySelectorAll(this.type.ariaControls ? `[aria-controls=\"${this.id}\"]` : ns.attr.selector('controls', this.id));\n\n    if (buttons.length > 0) for (let i = 0; i < buttons.length; i++) this.addButton(buttons[i]);\n\n    this.disclosed = this.primal === true;\n\n    this.gather();\n  }\n\n  gather () {\n    if (this.group) return;\n\n    DisclosuresGroup.groupById(this, this.GroupConstructor);\n    DisclosuresGroup.groupByParent(this, this.GroupConstructor);\n  }\n\n  static build (from) {\n    const elements = Array.prototype.slice.call(from.querySelectorAll(`.${this.selector}`));\n\n    for (const element of elements) disclosures.push(new this(element));\n  }\n\n  get type () { return this.constructor.type; }\n\n  static get type () { return null; }\n\n  static get selector () { return ''; }\n\n  addButton (element) {\n    const button = this.buttonFactory(element);\n    if (button.hasAttribute) {\n      if (this.primal === undefined) {\n        this.primal = button.disclosed;\n      } else button.apply(this.primal);\n    }\n    this.buttons.push(button);\n  }\n\n  get GroupConstructor () { return DisclosuresGroup; }\n\n  buttonFactory (button) {\n    return new DisclosureButton(button, this);\n  }\n\n  disclose (withhold) {\n    if (this.disclosed) return false;\n    this.pristine = false;\n    this.disclosed = true;\n    if (!withhold && this.group !== undefined) this.group.current = this;\n    return true;\n  }\n\n  conceal (withhold, preventFocus) {\n    if (!this.disclosed) return false;\n    this.pristine = false;\n    this.disclosed = false;\n    if (!preventFocus) this.focus();\n    if (!withhold && this.group !== undefined) this.group.current = null;\n    for (const disclosure of disclosures) if (disclosure !== this && this.element.contains(disclosure.element)) disclosure.reset();\n    return true;\n  }\n\n  get disclosed () {\n    return this._disclosed;\n  }\n\n  set disclosed (value) {\n    if (this._disclosed === value) return;\n    this.dispatch(value ? DISCLOSE_EVENT : CONCEAL_EVENT, this.type);\n    this._disclosed = value;\n    if (value) addClass(this.element, this.modifier);\n    else removeClass(this.element, this.modifier);\n    for (let i = 0; i < this.buttons.length; i++) this.buttons[i].apply(value);\n  }\n\n  reset () {}\n\n  change (hasAttribute) {\n    if (!this.constructor.type.canConceal) this.disclose();\n    else {\n      switch (true) {\n        case !hasAttribute:\n        case this.disclosed:\n          this.conceal();\n          break;\n\n        default:\n          this.disclose();\n      }\n    }\n  }\n\n  setGroup (group) {\n    this.group = group;\n  }\n\n  get buttonHasFocus () {\n    if (this.buttons.some((button) => { return button.hasFocus; })) return true;\n    return false;\n  }\n\n  get hasFocus () {\n    if (this.element === document.activeElement) return true;\n    if (this.element.querySelectorAll(':focus').length > 0) return true;\n    return this.buttonHasFocus;\n  }\n\n  focus () {\n    for (let i = 0; i < this.buttons.length; i++) {\n      const button = this.buttons[i];\n      if (button.hasAttribute) {\n        button.element.focus();\n        return;\n      }\n    }\n  }\n}\n\nDisclosure.DISCLOSE_EVENT = DISCLOSE_EVENT;\nDisclosure.CONCEAL_EVENT = CONCEAL_EVENT;\n\nexport { Disclosure };\n","export const DISCLOSURE_TYPES = {\n  expand: {\n    id: 'expanded',\n    ariaState: true,\n    ariaControls: true,\n    canConceal: true\n  },\n  select: {\n    id: 'selected',\n    ariaState: true,\n    ariaControls: true,\n    canConceal: false\n  },\n  opened: {\n    id: 'opened',\n    ariaState: false,\n    ariaControls: true,\n    canConceal: true\n  }\n};\n","/**\n * Utilitaire de gestion des Ã©venements clavier\n * Utiliser KeyListener.add() pour ajouter un event listener\n */\nclass KeyListener {\n  constructor (element) {\n    this.element = element;\n    this.collections = {};\n  }\n\n  /**\n   * key: la touche de clavier\n   * closure: la function Ã  appliquer\n   * type: event type, optionnel, si c'est en down, up ou press\n   * stopPropagation: Boolean, permet d'empÃªcher le comportement par default de l'evenement\n   */\n  _add (type, action) {\n    if (this.collections[type] === undefined) this.collections[type] = new KeyActionCollection(type, this.element);\n    this.collections[type].add(action);\n  }\n\n  down (key, closure, preventDefault, stopPropagation) {\n    this._add('down', new KeyAction(key, closure, preventDefault, stopPropagation));\n  }\n\n  up (key, closure, preventDefault, stopPropagation) {\n    this._add('up', new KeyAction(key, closure, preventDefault, stopPropagation));\n  }\n\n  dispose () {\n    for (const collection of this.collections) collection.dispose();\n    this.types = null;\n  }\n}\n\nclass KeyActionCollection {\n  constructor (type, element) {\n    this.type = type;\n    this.element = element;\n    this.actions = [];\n    this.binding = this.handle.bind(this);\n    this.element.addEventListener('key' + type, this.binding);\n  }\n\n  add (action) {\n    this.actions.push(action);\n  }\n\n  handle (e) {\n    for (const action of this.actions) action.handle(e);\n  }\n\n  dispose () {\n    this.element.removeEventListener('key' + this.type, this.binding);\n    this.actions = null;\n  }\n}\n\nclass KeyAction {\n  constructor (key, closure, preventDefault, stopPropagation) {\n    this.key = key;\n    this.closure = closure;\n    this.preventDefault = preventDefault === true;\n    this.stopPropagation = stopPropagation === true;\n  }\n\n  handle (e) {\n    if (e.keyCode === this.key) {\n      this.closure(e);\n      if (this.preventDefault) {\n        e.preventDefault();\n      }\n      if (this.stopPropagation) {\n        e.stopPropagation();\n      }\n    }\n  }\n}\n\nKeyListener.TAB = 9;\nKeyListener.ESCAPE = 27;\nKeyListener.END = 35;\nKeyListener.HOME = 36;\nKeyListener.LEFT = 37;\nKeyListener.UP = 38;\nKeyListener.RIGHT = 39;\nKeyListener.DOWN = 40;\n\nexport { KeyListener };\n","import { ns } from '../global/namespace.js';\n\nexport const COLLAPSE_CLASS = ns('collapse');\n","import { Disclosure } from '../disclosure/disclosure.js';\nimport { DisclosuresGroup } from '../disclosure/disclosures-group.js';\nimport { COLLAPSE_CLASS } from './constants.js';\nimport { DISCLOSURE_TYPES } from '../disclosure/disclosure-types.js';\n\nconst collapses = [];\nconst ascendants = {};\n\n/**\n * Tab coorespond au panel d'un Ã©lement Tabs (tab panel)\n * Tab Ã©tend disclosure qui ajoute/enleve le modifier --selected,\n * et ajoute/eleve l'attribut hidden, sur le panel\n */\nclass Collapse extends Disclosure {\n  constructor (element) {\n    super(element);\n    collapses.push(this);\n    this.requesting = this.request.bind(this);\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n    if (this.disclosed) this.unbound();\n  }\n\n  gatherByAscendants () {\n    if (this.group) return;\n\n    for (const ascendant in ascendants) {\n      let element = this.element.parentElement;\n\n      while (element) {\n        if (element.classList.contains(ascendant)) {\n          if (typeof ascendants[ascendant] === 'string') {\n            DisclosuresGroup.groupByParent(this, DisclosuresGroup, ascendants[ascendant]);\n          } else {\n            DisclosuresGroup.groupByParent(this, ascendants[ascendant]);\n          }\n          return;\n        }\n\n        element = element.parentElement;\n      }\n    }\n  }\n\n  gather () {\n    this.gatherByAscendants();\n    super.gather();\n  }\n\n  static get type () { return DISCLOSURE_TYPES.expand; }\n  static get selector () { return COLLAPSE_CLASS; }\n\n  static register (ascendant, groupSelector) {\n    ascendants[ascendant] = groupSelector;\n    for (const collapse of collapses) collapse.gatherByAscendants();\n  }\n\n  transitionend (e) {\n    if (!this.disclosed) this.element.style.maxHeight = '';\n  }\n\n  unbound () {\n    this.element.style.maxHeight = 'none';\n  }\n\n  disclose (withhold) {\n    if (this.disclosed) return;\n    this.unbound();\n    this.adjust();\n    this.requested = () => { super.disclose(withhold); };\n    window.requestAnimationFrame(this.requesting);\n  }\n\n  conceal (withhold, preventFocus) {\n    if (!this.disclosed) return;\n    this.adjust();\n    this.requested = () => { super.conceal(withhold, preventFocus); };\n    window.requestAnimationFrame(this.requesting);\n  }\n\n  request () {\n    if (this.requested) this.requested();\n    this.requested = null;\n  }\n\n  adjust () {\n    this.element.style.setProperty('--collapser', 'none');\n    const height = this.element.offsetHeight;\n    this.element.style.setProperty('--collapse', -height + 'px');\n    this.element.style.setProperty('--collapser', '');\n  }\n\n  reset () {\n    if (!this.pristine) this.disclosed = false;\n  }\n}\n\nexport { Collapse };\n","class EquisizedGroup {\n  constructor (selector, groups) {\n    this.selector = selector;\n    this.groups = typeof groups === 'string' ? document.querySelectorAll(groups) : groups;\n\n    for (let i = 0; i < this.groups.length; i++) {\n      this.equisizedGroups.push(new Equisized(this.selector, this.groups[i]));\n    }\n\n    this.changing = this.change.bind(this);\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    for (let i = 0; i < this.equisizedGroups.length; i++) {\n      this.equisizedGroups[i].change();\n    }\n  }\n}\n\nclass Equisized {\n  constructor (selector, group) {\n    this.selector = selector;\n    this.group = group;\n    this.elements = this.group.querySelectorAll(this.selector);\n    this.maxWidth = 0;\n\n    this.changing = this.change.bind(this);\n    window.addEventListener('resize', this.changing);\n    window.addEventListener('load', this.changing); // fix change before css load\n    // this.change();\n  }\n\n  change () {\n    this.reset();\n    for (let i = 0; i < this.elements.length; i++) {\n      const tmpWWidth = this._getWidth(this.elements[i]);\n      if (tmpWWidth > this.maxWidth) {\n        this.maxWidth = tmpWWidth;\n      }\n    }\n    this.apply();\n  }\n\n  apply () {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i].style.width = this.maxWidth + 1 + 'px';\n    }\n  }\n\n  reset () {\n    for (let i = 0; i < this.elements.length; i++) {\n      this.elements[i].style.width = 'auto';\n    }\n    this.maxWidth = 0;\n  }\n\n  _getWidth (el) {\n    let width = el.offsetWidth;\n    const style = getComputedStyle(el);\n    width += parseInt(style.marginLeft) + parseInt(style.marginRight);\n    return width;\n  }\n}\n\nexport { Equisized, EquisizedGroup };\n","import api from './api.js';\nimport { ns } from './src/scripts/global/namespace.js';\nimport { addClass, removeClass } from './src/scripts/manipulation/classes.js';\nimport engine from './src/scripts/engine/engine.js';\nimport { Initializer } from './src/scripts/global/initializer.js';\nimport { Instance } from './src/scripts/engine/instantiate/instance.js';\n\nimport { Disclosure } from './src/scripts/disclosure/disclosure.js';\nimport { DisclosureButton } from './src/scripts/disclosure/disclosure-button.js';\nimport { DisclosuresGroup } from './src/scripts/disclosure/disclosures-group.js';\nimport { DISCLOSURE_TYPES } from './src/scripts/disclosure/disclosure-types.js';\n\nimport { KeyListener } from './src/scripts/key-listener/key-listener.js';\nimport { Collapse } from './src/scripts/collapse/collapse.js';\nimport { Equisized } from './src/scripts/manipulation/size.js';\n\napi.core.ns = ns;\napi.core.addClass = addClass;\napi.core.removeClass = removeClass;\napi.core.engine = engine;\napi.core.Instance = Instance;\napi.core.Initializer = Initializer;\napi.core.Disclosure = Disclosure;\napi.core.DisclosureButton = DisclosureButton;\napi.core.DisclosuresGroup = DisclosuresGroup;\napi.core.DISCLOSURE_TYPES = DISCLOSURE_TYPES;\n\napi.KeyListener = KeyListener;\napi.Collapse = Collapse;\napi.Equisized = Equisized;\n","/* eslint-disable no-new */\nimport { Initializer } from './global/initializer.js';\nimport build from './collapse/build.js';\nimport { COLLAPSE_CLASS } from './collapse/constants.js';\n\nnew Initializer(`.${COLLAPSE_CLASS}`, [build]);\n","import { Collapse } from './collapse.js';\n\nconst build = () => {\n  Collapse.build(document);\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nexport const ACCORDIONS_GROUP = api.core.ns('accordions-group');\nexport const ACCORDION_ASCENDANT = api.core.ns('accordion');\n","import api from '../../../api.js';\nimport { ACCORDIONS_GROUP } from './constants.js';\n\nclass AccordionsGroup extends api.core.DisclosuresGroup {\n  static get selector () { return ACCORDIONS_GROUP; }\n}\n\nexport { AccordionsGroup };\n","import api from './api.js';\nimport { AccordionsGroup } from './src/scripts/accordion/accordions-group.js';\n\napi.AccordionsGroup = AccordionsGroup;\n","import api from '../../api.js';\nimport { ACCORDION_ASCENDANT } from './accordion/constants.js';\nimport { AccordionsGroup } from './accordion/accordions-group.js';\n\napi.Collapse.register(ACCORDION_ASCENDANT, AccordionsGroup);\n","import api from '../../../api.js';\n\nexport const BREADCRUMB_COLLAPSE_SELECTOR = `${api.core.ns.selector('breadcrumb')} ${api.core.ns.selector('collapse')}`;\n","import api from '../../../api.js';\n\nclass Breadcrumb extends api.core.Instance {\n  constructor (element) {\n    super(element);\n    this.collapse = api.core.Instance.getInstances(element, api.Collapse)[0];\n    this.links = [...this.element.querySelectorAll('a[href]')];\n    this.count = 0;\n    if (this.links.length) {\n      this.listen(api.core.Disclosure.DISCLOSE_EVENT, this.focus.bind(this));\n      // TODO: refactor avec instance\n      this.resizing = this.resize.bind(this);\n      window.addEventListener('resize', this.resizing);\n    }\n  }\n\n  focus () {\n    this.links[0].focus();\n    api.core.engine.renderer.next(() => { this.verify(); });\n  }\n\n  verify () {\n    this.count++;\n    if (this.count > 100) return;\n    if (document.activeElement !== this.links[0]) this.focus();\n  }\n\n  resize () {\n    if (window.matchMedia('(min-width: 48em)').matches) {\n      if (this.collapse.buttons[0] === document.activeElement) this.links.focus();\n    } else {\n      if (this.links.indexOf(document.activeElement) > -1) this.collapse.focus();\n    }\n  }\n}\n\nexport { Breadcrumb };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport build from './breadcrumb/build.js';\nimport { BREADCRUMB_COLLAPSE_SELECTOR } from './breadcrumb/constants';\n\nnew api.core.Initializer(BREADCRUMB_COLLAPSE_SELECTOR, [build]);\n","import { BREADCRUMB_COLLAPSE_SELECTOR } from './constants';\nimport { Breadcrumb } from './breadcrumb';\n\nconst build = () => {\n  const breadcrumbs = [];\n  const breadcrumbNodes = document.querySelectorAll(BREADCRUMB_COLLAPSE_SELECTOR);\n  for (let i = 0; i < breadcrumbNodes.length; i++) breadcrumbs.push(new Breadcrumb(breadcrumbNodes[i]));\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nexport const BUTTON_SELECTOR = api.core.ns.selector('btn');\nexport const BUTTONS_GROUP_SELECTOR = api.core.ns.selector('btns-group');\nexport const EQUISIZED_BUTTONS_GROUP_SELECTOR = api.core.ns.selector('btns-group--equisized');\n","/* eslint-disable no-new */\nimport api from '../../api.js';\n\nimport build from './buttons/build.js';\nimport { BUTTONS_GROUP_SELECTOR } from './buttons/constants';\n\nnew api.core.Initializer(BUTTONS_GROUP_SELECTOR, [build]);\n","import api from '../../../api.js';\nimport { BUTTON_SELECTOR, EQUISIZED_BUTTONS_GROUP_SELECTOR } from './constants';\n\nconst build = () => {\n  const group = document.querySelectorAll(EQUISIZED_BUTTONS_GROUP_SELECTOR);\n  const arrayEquisized = [];\n  for (let i = 0; i < group.length; i++) {\n    arrayEquisized.push(new api.Equisized(BUTTON_SELECTOR, group[i]));\n  }\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nexport const MODAL_SELECTOR = api.core.ns.selector('modal');\nexport const MODAL_CLASS = api.core.ns('modal');\nexport const NO_SCROLL_CLASS = api.core.ns('no-scroll');\nexport const SCROLL_SHADOW_CLASS = api.core.ns('scroll-shadow');\nexport const MODAL_BODY_SELECTOR = api.core.ns.selector('modal__body');\nexport const OFFSET_MOBILE = 32; // 32px => 8v => 2rem\n","import api from '../../../api.js';\n\nconst unordereds = [\n  '[tabindex=\"0\"]',\n  'a[href]',\n  'button:not([disabled])',\n  'input:not([disabled])',\n  'select:not([disabled])',\n  'textarea:not([disabled])',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\" i])',\n  'details>summary:first-of-type',\n  'details'\n];\n\nconst UNORDEREDS = unordereds.join();\n\nconst ordereds = [\n  '[tabindex]:not([tabindex=\"-1\"]):not([tabindex=\"0\"])'\n];\n\nconst ORDEREDS = ordereds.join();\n\nconst isFocusable = (element, container) => {\n  if (window.getComputedStyle(element).visibility === 'hidden') return false;\n  if (container === undefined) container = element;\n\n  while (container.contains(element)) {\n    if (window.getComputedStyle(element).display === 'none') return false;\n    element = element.parentElement;\n  }\n\n  return true;\n};\n\nclass FocusTrap {\n  constructor (onTrap, onUntrap) {\n    this.element = null;\n    this.activeElement = null;\n    this.onTrap = onTrap;\n    this.onUntrap = onUntrap;\n    this.waiting = this.wait.bind(this);\n    this.handling = this.handle.bind(this);\n    this.current = null;\n  }\n\n  get trapped () { return this.element !== null; }\n\n  trap (element) {\n    if (this.trapped) this.untrap();\n\n    this.element = element;\n    this.isTrapping = true;\n    this.wait();\n\n    if (this.onTrap) this.onTrap();\n  }\n\n  wait () {\n    if (!isFocusable(this.element)) {\n      api.core.engine.renderer.next(this.waiting);\n      return;\n    }\n\n    this.trapping();\n  }\n\n  trapping () {\n    if (!this.isTrapping) return;\n    this.isTrapping = false;\n    const focusables = this.focusables;\n    if (focusables.length) focusables[0].focus();\n    this.element.setAttribute('aria-modal', true);\n    this.element.addEventListener('keydown', this.handling);\n\n    this.stunneds = [];\n    this.stun(document.body);\n  }\n\n  stun (node) {\n    for (const child of node.children) {\n      if (child === this.element) continue;\n      if (child.contains(this.element)) {\n        this.stun(child);\n        continue;\n      }\n      this.stunneds.push(new Stunned(child));\n    }\n  }\n\n  handle (e) {\n    if (e.keyCode !== 9) return;\n\n    const focusables = this.focusables;\n    if (focusables.length === 0) return;\n\n    const first = focusables[0];\n    const last = focusables[focusables.length - 1];\n\n    const index = focusables.indexOf(document.activeElement);\n\n    if (e.shiftKey) {\n      if (!this.element.contains(document.activeElement) || index < 1) {\n        e.preventDefault();\n        last.focus();\n      } else if (document.activeElement.tabIndex > 0 || focusables[index - 1].tabIndex > 0) {\n        e.preventDefault();\n        focusables[index - 1].focus();\n      }\n    } else {\n      if (!this.element.contains(document.activeElement) || index === focusables.length - 1 || index === -1) {\n        e.preventDefault();\n        first.focus();\n      } else if (document.activeElement.tabIndex > 0) {\n        e.preventDefault();\n        focusables[index + 1].focus();\n      }\n    }\n  }\n\n  get focusables () {\n    let unordereds = [...this.element.querySelectorAll(UNORDEREDS)];\n\n    /**\n     *  filtrage des radiobutttons de mÃªme name (la navigations d'un groupe de radio se fait Ã  la flÃ¨che et non pas au tab\n     **/\n    const radios = [...document.documentElement.querySelectorAll('input[type=\"radio\"]')];\n\n    if (radios.length) {\n      const groups = {};\n\n      for (const radio of radios) {\n        const name = radio.getAttribute('name');\n        if (groups[name] === undefined) groups[name] = new RadioButtonGroup(name);\n        groups[name].push(radio);\n      }\n\n      unordereds = unordereds.filter((unordered) => {\n        if (unordered.tagName.toLowerCase() !== 'input' || unordered.getAttribute('type').toLowerCase() !== 'radio') return true;\n        const name = unordered.getAttribute('name');\n        return groups[name].keep(unordered);\n      });\n    }\n\n    const ordereds = [...this.element.querySelectorAll(ORDEREDS)];\n\n    ordereds.sort((a, b) => a.tabIndex - b.tabIndex);\n\n    const noDuplicates = unordereds.filter((element) => ordereds.indexOf(element) === -1);\n    const concateneds = ordereds.concat(noDuplicates);\n    return concateneds.filter((element) => element.tabIndex !== '-1' && isFocusable(element, this.element));\n  }\n\n  untrap () {\n    if (!this.trapped) return;\n    this.isTrapping = false;\n\n    this.element.removeAttribute('aria-modal');\n    this.element.removeEventListener('keydown', this.handling);\n    this.element = null;\n\n    for (const stunned of this.stunneds) stunned.unstun();\n    this.stunneds = [];\n\n    if (this.onUntrap) this.onUntrap();\n  }\n}\n\nclass Stunned {\n  constructor (element) {\n    this.element = element;\n    this.hidden = element.getAttribute('aria-hidden');\n    this.inert = element.getAttribute('inert');\n\n    this.element.setAttribute('aria-hidden', true);\n    this.element.setAttribute('inert', '');\n  }\n\n  unstun () {\n    if (this.hidden === null) this.element.removeAttribute('aria-hidden');\n    else this.element.setAttribute('aria-hidden', this.hidden);\n\n    if (this.inert === null) this.element.removeAttribute('inert');\n    else this.element.setAttribute('inert', this.inert);\n  }\n}\n\nclass RadioButtonGroup {\n  constructor (name) {\n    this.name = name;\n    this.buttons = [];\n  }\n\n  push (button) {\n    this.buttons.push(button);\n    if (button === document.activeElement || button.checked || this.selected === undefined) this.selected = button;\n  }\n\n  keep (button) {\n    return this.selected === button;\n  }\n}\n\nexport { FocusTrap };\n","import api from '../../../api.js';\nimport { FocusTrap } from './focus-trap.js';\n\nclass ModalsGroup extends api.core.DisclosuresGroup {\n  constructor () {\n    super();\n    this.trap = new FocusTrap();\n  }\n\n  apply (value, initial) {\n    super.apply(value, initial);\n    if (this.current === null) this.trap.untrap();\n    else this.trap.trap(this.current.element);\n  }\n}\n\nexport { ModalsGroup };\n","import api from '../../../api.js';\nimport {\n  OFFSET_MOBILE,\n  NO_SCROLL_CLASS,\n  MODAL_CLASS,\n  SCROLL_SHADOW_CLASS,\n  MODAL_BODY_SELECTOR\n} from './constants';\nimport { ModalsGroup } from './modals-group';\n\nconst group = new ModalsGroup();\n\nclass Modal extends api.core.Disclosure {\n  constructor (element) {\n    super(element);\n    this.body = this.element.querySelector(MODAL_BODY_SELECTOR);\n    this.scrollDistance = 0;\n    this.scrolling = this.resize.bind(this, false);\n    this.resizing = this.resize.bind(this, true);\n    this.init();\n    this.resize(true);\n  }\n\n  init () {\n    this.element.addEventListener('click', this.click.bind(this));\n\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.ESCAPE, this.conceal.bind(this), true, true);\n\n    if (this.body) {\n      this.body.addEventListener('scroll', this.scrolling);\n      window.addEventListener('resize', this.resizing);\n      // window.addEventListener('orientationchange', this.resizing);\n    }\n  }\n\n  click (e) {\n    if (this.body && this.element === e.target) this.conceal();\n  }\n\n  gather () {\n    group.add(this);\n  }\n\n  disclose (withhold) {\n    if (!super.disclose(withhold)) return false;\n    this.resize(true);\n    this.handleScroll(false);\n    return true;\n  }\n\n  conceal (withhold, preventFocus) {\n    if (!super.conceal(withhold, preventFocus)) return false;\n    this.handleScroll(true);\n    return true;\n  }\n\n  /**\n   * Fixe l'arriÃ¨re plan quand la modal est ouverte\n   */\n  // TODO: crÃ©er une fonction de fix de scroll dans core (api.noScroll = true)\n  handleScroll (isScrollable) {\n    if (isScrollable) {\n      api.core.removeClass(document.documentElement, NO_SCROLL_CLASS);\n      document.body.style.top = '';\n      window.scroll(0, this.scrollDistance);\n    } else {\n      if (!document.documentElement.classList.contains(NO_SCROLL_CLASS)) {\n        this.scrollDistance = window.scrollY;\n      }\n      document.body.style.top = this.scrollDistance * -1 + 'px';\n      api.core.addClass(document.documentElement, NO_SCROLL_CLASS);\n    }\n  }\n\n  /**\n   * Ajoute une ombre autour du footer lorsque l'on peut scroller dans la modale\n   * corrige le 100vh, en mobile notamment, lorsque la barre navigateur est prÃ©sente par exemple.\n   */\n  resize (isResizing, e) {\n    if (!this.body) return;\n    if (this.body.scrollHeight > this.body.clientHeight) {\n      if (this.body.offsetHeight + this.body.scrollTop >= this.body.scrollHeight) {\n        api.core.removeClass(this.body, SCROLL_SHADOW_CLASS);\n      } else {\n        api.core.addClass(this.body, SCROLL_SHADOW_CLASS);\n      }\n    } else {\n      api.core.removeClass(this.body, SCROLL_SHADOW_CLASS);\n    }\n\n    if (isResizing) {\n      this.body.style.maxHeight = (window.innerHeight - OFFSET_MOBILE) + 'px';\n\n      // Une deuxiÃ¨me fois aprÃ¨s positionnement des barres du navigateur (ios)\n      // TODO: Ã  tester si fonctionnel sans setTimeout\n      api.core.engine.renderer.next(() => {\n        this.body.style.maxHeight = (window.innerHeight - OFFSET_MOBILE) + 'px';\n      });\n    }\n  }\n\n  static get type () { return api.core.DISCLOSURE_TYPES.opened; }\n  static get selector () { return MODAL_CLASS; }\n\n  get GroupConstructor () { return ModalsGroup; }\n}\n\nexport { Modal };\n","import api from './api.js';\n\nimport { Modal } from './src/scripts/modal/modal';\nimport { ModalsGroup } from './src/scripts/modal/modals-group';\nimport { FocusTrap } from './src/scripts/modal/focus-trap';\n\napi.Modal = Modal;\napi.ModalsGroup = ModalsGroup;\napi.FocusTrap = FocusTrap;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './modal/build.js';\nimport { MODAL_SELECTOR } from './modal/constants.js';\n\nnew api.core.Initializer(MODAL_SELECTOR, [build]);\n","import { Modal } from './modal';\n\n/**\n * initialise tout les Ã©lÃ©ments Modal dans la page\n */\nconst build = () => {\n  Modal.build(document);\n};\n\nexport { build };\n","import api from '../../../api.js';\n\nexport const NAVIGATION_CLASS = api.core.ns('nav');\nexport const NAVIGATION_LIST_CLASS = api.core.ns('nav__list');\nexport const NAVIGATION_ITEM_CLASS = api.core.ns('nav__item');\nexport const NAVIGATION_ITEM_RIGHT_CLASS = api.core.ns('nav__item--align-right');\nexport const NAVIGATION_MENU_CLASS = api.core.ns('menu');\n","import api from '../../../api.js';\nimport {\n  NAVIGATION_CLASS,\n  NAVIGATION_ITEM_CLASS,\n  NAVIGATION_LIST_CLASS,\n  NAVIGATION_MENU_CLASS,\n  NAVIGATION_ITEM_RIGHT_CLASS\n} from './constants';\n\nclass Navigation extends api.core.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n\n    this.menus = [];\n\n    this.navList = element.querySelector(`.${NAVIGATION_LIST_CLASS}`);\n\n    document.addEventListener('focusout', this.focusOut.bind(this));\n    window.addEventListener('resize', this.resize.bind(this));\n    window.addEventListener('orientationchange', this.resize.bind(this));\n    this.resize();\n  }\n\n  static get selector () { return NAVIGATION_CLASS; }\n\n  add (member) {\n    super.add(member);\n\n    if (member.element.classList.contains(NAVIGATION_MENU_CLASS)) {\n      this.menus.push(new NavigationMenu(member, this.navList.getBoundingClientRect().right));\n    }\n  }\n\n  focusOut (e) {\n    requestAnimationFrame(() => {\n      if (this.current !== null && !this.current.hasFocus) this.index = -1;\n    });\n  }\n\n  get index () { return super.index; }\n\n  set index (value) {\n    if (value === -1 && this.current !== null && this.current.hasFocus) this.current.focus();\n    super.index = value;\n  }\n\n  resize () {\n    const right = this.navList.getBoundingClientRect().right;\n\n    for (const menu of this.menus) menu.place(right);\n  }\n}\n\nclass NavigationMenu {\n  constructor (collapse, right) {\n    this.initialize(collapse);\n    this.place(right);\n  }\n\n  initialize (collapse) {\n    this.element = collapse.element;\n\n    for (const button of collapse.buttons) {\n      if (!button.hasAttribute) continue;\n      this.button = button.element;\n      break;\n    }\n\n    let item = this.element.parentElement;\n    while (item) {\n      if (item.classList.contains(NAVIGATION_ITEM_CLASS)) {\n        this.item = item;\n        break;\n      }\n      item = item.parentElement;\n    }\n  }\n\n  place (right) {\n    const styles = getComputedStyle(this.element);\n    const width = parseFloat(styles.width);\n    const left = this.button.getBoundingClientRect().left;\n\n    if (left + width > right) api.core.addClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n    else api.core.removeClass(this.item, NAVIGATION_ITEM_RIGHT_CLASS);\n  }\n}\n\nexport { Navigation };\n","import api from './api.js';\nimport { Navigation } from './src/scripts/navigation/navigation';\n\napi.Navigation = Navigation;\n","import api from '../../api.js';\nimport { NAVIGATION_CLASS } from './navigation/constants.js';\nimport { Navigation } from './navigation/navigation.js';\n\napi.Collapse.register(NAVIGATION_CLASS, Navigation);\n","import api from '../../../api.js';\n\nexport const SCHEME_ATTR = api.core.ns.attr('theme');\nexport const TRANSITION_ATTR = api.core.ns.attr('transition');\n","import { SCHEME_ATTR, TRANSITION_ATTR } from './constants';\n\nclass Scheme {\n  constructor () {\n    this.init();\n  }\n\n  init () {\n    this.scheme = localStorage.getItem('scheme')\n      ? localStorage.getItem('scheme')\n      : null;\n\n    if (this.scheme === null) {\n      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {\n        this.scheme = 'dark';\n        localStorage.setItem('scheme', 'dark');\n      } else this.scheme = 'light';\n    }\n\n    this.root = document.documentElement;\n\n    if (this.scheme === 'dark') {\n      if (!this.root.hasAttribute(TRANSITION_ATTR)) {\n        this.root.setAttribute(SCHEME_ATTR, 'dark');\n      } else {\n        this.root.removeAttribute(TRANSITION_ATTR);\n        this.root.setAttribute(SCHEME_ATTR, 'dark');\n\n        setTimeout(() => {\n          this.root.setAttribute(TRANSITION_ATTR, '');\n        }, 300);\n      }\n    } else this.root.setAttribute(SCHEME_ATTR, 'light');\n\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observer.observe(this.root, { attributes: true });\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === SCHEME_ATTR) {\n        const scheme = this.root.getAttribute(SCHEME_ATTR);\n        if (scheme === 'dark') {\n          localStorage.setItem('scheme', 'dark');\n        } else if (scheme === 'light') {\n          localStorage.setItem('scheme', 'light');\n        }\n      }\n    });\n  }\n}\n\nexport { Scheme };\n","import api from './api.js';\nimport { Scheme } from './src/scripts/scheme/scheme';\n\napi.Scheme = Scheme;\n","import api from '../../../api.js';\n\nexport const RADIOS_THEME_NAME = `input[name=\"${api.core.ns.selector('radios-theme', '')}\"]`;\nexport const SWITCH_THEME_ID = api.core.ns.selector('switch-theme', '#');\nexport const THEME_ATTR = api.core.ns.attr('theme');\n","import { RADIOS_THEME_NAME, THEME_ATTR } from './constants';\n\nclass SwitchTheme {\n  constructor () {\n    this.attributeName = THEME_ATTR;\n    this.theme = null;\n    this.radios = document.querySelectorAll(RADIOS_THEME_NAME);\n\n    for (var i = 0; i < this.radios.length; i++) {\n      this.radios[i].addEventListener('change', this.change.bind(this));\n    }\n\n    this.observer = new MutationObserver(this.mutate.bind(this));\n    this.observe();\n    this.apply();\n  }\n\n  observe () {\n    this.observer.observe(document.documentElement, { attributes: true });\n  }\n\n  mutate (mutations) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'attributes' && mutation.attributeName === this.attributeName) {\n        this.apply();\n      }\n    });\n  }\n\n  apply () {\n    const theme = document.documentElement.getAttribute(this.attributeName);\n    this.isApplying = true;\n    for (var i = 0; i < this.radios.length; i++) {\n      this.radios[i].checked = this.radios[i].value === theme;\n    }\n    this.isApplying = false;\n  }\n\n  change () {\n    if (this.isApplying) return;\n    if (this.observer) this.observer.disconnect();\n    this.theme = document.querySelector(RADIOS_THEME_NAME + ':checked');\n    if (this.theme) {\n      document.documentElement.setAttribute(this.attributeName, this.theme.value);\n    } else {\n      document.documentElement.removeAttribute(this.attributeName);\n    }\n    if (this.observer) this.observe();\n  }\n}\n\nexport { SwitchTheme };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { SCHEME_ATTR } from './scheme/constants';\nimport { SWITCH_THEME_ID } from './switch-theme/constants';\nimport buildScheme from './scheme/build';\nimport buildSwitch from './switch-theme/build';\n\nnew api.core.Initializer(`:root[${SCHEME_ATTR}]`, [buildScheme]);\nnew api.core.Initializer(`${SWITCH_THEME_ID}`, [buildSwitch]);\n","/* eslint-disable no-new */\nimport { Scheme } from './scheme';\n\nconst build = () => {\n  new Scheme();\n};\n\nexport default build;\n","/* eslint-disable no-new */\nimport { SwitchTheme } from './switch-theme';\n\nconst build = () => {\n  new SwitchTheme();\n};\n\nexport default build;\n","import api from '../../../api.js';\n\nexport const SIDEMENU_CLASS = api.core.ns('sidemenu');\nexport const SIDEMENU_LIST_CLASS = api.core.ns('sidemenu__list');\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { SIDEMENU_CLASS, SIDEMENU_LIST_CLASS } from './sidemenu/constants';\n\napi.Collapse.register(SIDEMENU_CLASS, SIDEMENU_LIST_CLASS);\n","import api from '../../../api.js';\n\nexport const TABLE_SELECTOR = api.core.ns.selector('table');\n// export const TABLE_CLASS = api.core.ns('table');\nexport const TABLE_SCROLLING_SELECTOR = `${api.core.ns.selector('table')}:not(${api.core.ns.selector('table--no-scroll')})`;\nexport const LEFT = 'left';\nexport const RIGHT = 'right';\nexport const SHADOW_CLASS = api.core.ns('table--shadow');\nexport const SHADOW_LEFT_CLASS = api.core.ns('table--shadow-left');\nexport const SHADOW_RIGHT_CLASS = api.core.ns('table--shadow-right');\nexport const WRAPPER_CLASS = api.core.ns('table__wrapper');\nexport const CAPTION_BOTTOM_CLASS = api.core.ns('table--caption-bottom');\nexport const SCROLL_OFFSET = 1; // valeur en px du scroll avant laquelle le shadow s'active ou se desactive\n","import api from '../../../api.js';\nimport {\n  SHADOW_CLASS,\n  SHADOW_LEFT_CLASS,\n  SHADOW_RIGHT_CLASS,\n  WRAPPER_CLASS,\n  LEFT,\n  RIGHT,\n  CAPTION_BOTTOM_CLASS, SCROLL_OFFSET\n} from './constants.js';\n\nclass Table {\n  constructor (table) {\n    this.init(table);\n  }\n\n  init (table) {\n    this.table = table;\n    this.tableElem = this.table.querySelector('table');\n    this.tableContent = this.tableElem.querySelector('tbody');\n    this.isScrollable = this.tableContent.offsetWidth > this.tableElem.offsetWidth;\n    this.caption = this.tableElem.querySelector('caption');\n    this.captionHeight = 0;\n    this.wrap();\n\n    const scrolling = this.change.bind(this);\n    this.tableElem.addEventListener('scroll', scrolling);\n    this.change();\n  }\n\n  change () {\n    const newScroll = this.tableContent.offsetWidth > this.tableElem.offsetWidth;\n    let firstTimeScrollable = this.tableElem.offsetWidth > this.table.offsetWidth;\n    if (newScroll || firstTimeScrollable) {\n      this.scroll();\n      this.handleCaption();\n    } else {\n      if (newScroll !== this.isScrollable) this.delete();\n    }\n    this.isScrollable = newScroll;\n    firstTimeScrollable = false;\n  }\n\n  delete () {\n    api.core.removeClass(this.table, SHADOW_RIGHT_CLASS);\n    api.core.removeClass(this.table, SHADOW_LEFT_CLASS);\n    api.core.removeClass(this.table, SHADOW_CLASS);\n    if (this.caption) {\n      this.tableElem.style.marginTop = '';\n      this.caption.style.top = '';\n      this.tableElem.style.marginBottom = '';\n      this.caption.style.bottom = '';\n    }\n  }\n\n  scroll () {\n    api.core.addClass(this.table, SHADOW_CLASS);\n    this.setShadowPosition();\n  }\n\n  /* ajoute un wrapper autour du tableau */\n  wrap () {\n    const wrapperHtml = document.createElement('div');\n    wrapperHtml.className = WRAPPER_CLASS;\n    this.table.insertBefore(wrapperHtml, this.tableElem);\n    wrapperHtml.appendChild(this.tableElem);\n    this.tableInnerWrapper = wrapperHtml;\n  }\n\n  /* affiche les blocs shadow en fonction de la position du scroll, en ajoutant la classe visible */\n  setShadowPosition () {\n    const tableScrollLeft = this.getScrollPosition(LEFT);\n    const tableScrollRight = this.getScrollPosition(RIGHT);\n\n    // on inverse en cas de lecture droite - gauche\n    if (document.documentElement.getAttribute('dir') === 'rtl') {\n      this.setShadowVisibility(RIGHT, tableScrollLeft);\n      this.setShadowVisibility(LEFT, tableScrollRight);\n    } else {\n      this.setShadowVisibility(LEFT, tableScrollLeft);\n      this.setShadowVisibility(RIGHT, tableScrollRight);\n    }\n  }\n\n  /* Donne le nombre de pixels scrollÃ©s honrizontalement dans un element scrollable */\n  getScrollPosition (side) {\n    let inverter = 1;\n    // on inverse en cas de lecture droite - gauche pour que la valeur de scroll soit toujours positive\n    if (document.documentElement.getAttribute('dir') === 'rtl') {\n      inverter = -1;\n    }\n    switch (side) {\n      case LEFT:\n        return this.tableElem.scrollLeft * inverter;\n      case RIGHT:\n        return this.tableContent.offsetWidth - this.tableElem.offsetWidth - this.tableElem.scrollLeft * inverter;\n      default:\n        return false;\n    }\n  }\n\n  /* positionne la caption en top nÃ©gatif et ajoute un margin-top au wrapper */\n  handleCaption () {\n    if (this.caption) {\n      const style = getComputedStyle(this.caption);\n      const newHeight = this.caption.offsetHeight + parseInt(style.marginTop) + parseInt(style.marginBottom);\n      this.captionHeight = newHeight;\n      if (this.table.classList.contains(CAPTION_BOTTOM_CLASS)) {\n        this.tableElem.style.marginBottom = this.captionHeight + 'px';\n        this.caption.style.bottom = -this.captionHeight + 'px';\n      } else {\n        this.tableElem.style.marginTop = this.captionHeight + 'px';\n        this.caption.style.top = -this.captionHeight + 'px';\n      }\n    }\n  }\n\n  /* ajoute la classe rf-table--shadow-right ou rf-table--shadow-right sur rf-table\n   en fonction d'une valeur de scroll et du sens (right, left) */\n  setShadowVisibility (side, scrollPosition) {\n    // si on a pas scroll, ou qu'on scroll jusqu'au bout\n    if (scrollPosition <= SCROLL_OFFSET) {\n      if (side === LEFT) api.core.removeClass(this.table, SHADOW_LEFT_CLASS);\n      else if (side === RIGHT) api.core.removeClass(this.table, SHADOW_RIGHT_CLASS);\n    } else {\n      if (side === LEFT) api.core.addClass(this.table, SHADOW_LEFT_CLASS);\n      else if (side === RIGHT) api.core.addClass(this.table, SHADOW_RIGHT_CLASS);\n    }\n  }\n}\n\nexport { Table };\n","import api from './api.js';\nimport { Table } from './src/scripts/table/table.js';\n\napi.Table = Table;\n","import { TABLE_SCROLLING_SELECTOR } from './constants';\nimport { Table } from './table';\n\nconst tables = [];\n\nconst change = () => {\n  for (let i = 0; i < tables.length; i++) tables[i].change();\n};\n\nconst build = () => {\n  const tableNodes = document.querySelectorAll(TABLE_SCROLLING_SELECTOR);\n  for (let i = 0; i < tableNodes.length; i++) tables.push(new Table(tableNodes[i]));\n\n  window.addEventListener('resize', change);\n  window.addEventListener('orientationchange', change);\n  change();\n};\n\nexport { build };\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './table/build.js';\nimport { TABLE_SELECTOR } from './table/constants';\n\nnew api.core.Initializer(TABLE_SELECTOR, [build]);\n","import api from '../../../api';\n\n/**\n  * TabButton correspond au bouton cliquable qui change le panel\n  * TabButton Ã©tend de DisclosureButton qui ajoute/enelve l'attribut aria-selected,\n  * Et change l'attributte tabindex a 0 si le boutton est actif (value=true), -1 s'il n'est pas actif (value=false)\n */\nclass TabButton extends api.core.DisclosureButton {\n  apply (value) {\n    super.apply(value);\n    if (this.hasAttribute) {\n      this.element.setAttribute('tabindex', value ? '0' : '-1');\n    }\n  }\n}\n\nexport { TabButton };\n","import api from '../../../api.js';\n\nexport const TABS_SELECTOR = api.core.ns.selector('tabs');\nexport const TABS_CLASS = api.core.ns('tabs');\nexport const TAB_CLASS = api.core.ns('tabs__tab');\nexport const PANEL_CLASS = api.core.ns('tabs__panel');\nexport const LIST_CLASS = api.core.ns('tabs__list');\n\nexport const TRANSITION_TIME = 100;\n","import api from '../../../api.js';\nimport { LIST_CLASS, TAB_CLASS, TABS_CLASS } from './constants';\n\n/**\n* TabGroup est la classe Ã©tendue de DiscosuresGroup\n* Correspond Ã  un objet Tabs avec plusieurs tab-button & Tab (panel)\n*/\nclass TabsGroup extends api.core.DisclosuresGroup {\n  constructor (id, element) {\n    super(id, element);\n    this.list = element.querySelector(`.${LIST_CLASS}`);\n\n    element.addEventListener('transitionend', this.transitionend.bind(this));\n\n    this.init();\n    api.core.engine.renderer.add(this.render.bind(this));\n  }\n\n  static get selector () { return TABS_CLASS; }\n\n  transitionend (e) {\n    this.element.style.transition = 'none';\n  }\n\n  init () {\n    this.keyListener = new api.KeyListener(this.element);\n    this.keyListener.down(api.KeyListener.RIGHT, this.arrowRightPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.LEFT, this.arrowLeftPress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.HOME, this.homePress.bind(this), true, true);\n    this.keyListener.down(api.KeyListener.END, this.endPress.bind(this), true, true);\n  }\n\n  /**\n   * Selectionne l'element suivant de la liste si on est sur un bouton\n   * Si on est Ã  la fin on retourne au dÃ©but\n   */\n  arrowRightPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index < this.length - 1) {\n        this.index++;\n      } else {\n        this.index = 0;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne l'element prÃ©cÃ©dent de la liste si on est sur un bouton\n   * Si on est au debut retourne a la fin\n   */\n  arrowLeftPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      if (this.index > 0) {\n        this.index--;\n      } else {\n        this.index = this.length - 1;\n      }\n\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le permier element de la liste si on est sur un bouton\n   */\n  homePress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = 0;\n      this.focus();\n    }\n  };\n\n  /**\n   * Selectionne le dernier element de la liste si on est sur un bouton\n   */\n  endPress () {\n    if (document.activeElement.classList.contains(TAB_CLASS)) {\n      this.index = this.length - 1;\n      this.focus();\n    }\n  };\n\n  focus () {\n    if (this.current) this.current.focus();\n  }\n\n  apply () {\n    for (let i = 0; i < this._index; i++) this.members[i].translate(-1);\n    this.current.element.style.transform = '';\n    for (let i = this._index + 1; i < this.length; i++) this.members[i].translate(1);\n    this.element.style.transition = '';\n  }\n\n  add (tab) {\n    super.add(tab);\n    if (this.length === 1 || tab.disclosed) this.current = tab;\n    else {\n      const index = this.members.indexOf(tab);\n      if (this._index > -1 && this._index !== index) tab.translate(index < this._index ? -1 : 1, true);\n    }\n  }\n\n  render () {\n    if (this.current === null) return;\n    const paneHeight = Math.round(this.current.element.offsetHeight);\n    if (this.panelHeight === paneHeight) return;\n    this.panelHeight = paneHeight;\n    this.element.style.height = (this.panelHeight + this.list.offsetHeight) + 'px';\n  }\n}\n\nexport { TabsGroup };\n","import api from '../../../api.js';\nimport { TabButton } from './tab-button.js';\nimport { PANEL_CLASS } from './constants.js';\nimport { TabsGroup } from './tabs-group.js';\n\n/**\n  * Tab coorespond au panel d'un Ã©lement Tabs (tab panel)\n  * Tab Ã©tend disclosure qui ajoute/enleve le modifier --selected,\n  * et ajoute/eleve l'attribut hidden, sur le panel\n  */\nclass Tab extends api.core.Disclosure {\n  static get type () { return api.core.DISCLOSURE_TYPES.select; }\n  static get selector () { return PANEL_CLASS; }\n\n  get GroupConstructor () { return TabsGroup; }\n\n  buttonFactory (element) {\n    return new TabButton(element, this);\n  }\n\n  translate (direction, initial) {\n    if (initial) this.element.style.transition = 'none';\n    this.element.style.transform = `translate(${direction * 100}%)`;\n    if (initial) this.element.style.transition = '';\n  }\n\n  reset () {\n    this.group.index = 0;\n  }\n}\n\nexport { Tab };\n","import api from './api.js';\nimport { Tab } from './src/scripts/tabs/tab.js';\nimport { TabButton } from './src/scripts/tabs/tab-button.js';\nimport { TabsGroup } from './src/scripts/tabs/tabs-group';\n\napi.Tab = Tab;\napi.TabButton = TabButton;\napi.TabsGroup = TabsGroup;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { build } from './tabs/build.js';\nimport { TABS_SELECTOR } from './tabs/constants.js';\n\nnew api.core.Initializer(TABS_SELECTOR, [build]);\n","import { Tab } from './tab';\n\n/**\n* Initialise tout les Ã©lÃ©ments Tab dans la page\n*/\nconst build = () => {\n  Tab.build(document);\n};\n\nexport { build };\n","import api from '../../../api.js';\n\nexport const HEADER_SELECTOR = api.core.ns.selector('header');\nexport const HEADER_TOOLS_SELECTOR = api.core.ns.selector('header__tools');\nexport const HEADER_SEARCH_BAR_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.core.ns.selector('search-bar')}`;\nexport const HEADER_SHORTCUTS_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.core.ns.selector('shortcuts')}`;\nexport const HEADER_NAV_SELECTOR = api.core.ns.selector('nav');\nexport const HEADER_NAV_LIST_SELECTOR = `${HEADER_NAV_SELECTOR} ${api.core.ns.selector('nav__list')}`;\n","import api from '../../../api.js';\nimport {\n  HEADER_NAV_LIST_SELECTOR,\n  HEADER_NAV_SELECTOR,\n  HEADER_SEARCH_BAR_SELECTOR,\n  HEADER_SELECTOR,\n  HEADER_SHORTCUTS_SELECTOR,\n  HEADER_TOOLS_SELECTOR\n} from './constants';\n\nlet count = 0;\n\nclass Header {\n  constructor (header) {\n    this.header = header || document.querySelector(HEADER_SELECTOR);\n    this.numId = count;\n    count++;\n    this.modals = [];\n\n    this.init();\n  }\n\n  getModal (element) {\n    if (!element) return;\n    const modals = api.core.Instance.getInstances(element, api.Modal);\n    if (!modals || !modals.length) return;\n    this.modals.push(modals[0]);\n  }\n\n  init () {\n    this.tools = this.header.querySelector(HEADER_TOOLS_SELECTOR);\n    this.getModal(this.tools);\n\n    this.searchBar = this.header.querySelector(HEADER_SEARCH_BAR_SELECTOR);\n\n    this.nav = this.header.querySelector(HEADER_NAV_SELECTOR);\n    this.getModal(this.nav);\n\n    this.shortcuts = this.header.querySelector(HEADER_SHORTCUTS_SELECTOR);\n\n    this.navList = this.header.querySelector(HEADER_NAV_LIST_SELECTOR);\n\n    this.changing = this.change.bind(this);\n\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    this.isLarge = window.matchMedia('(min-width: 62em)').matches;\n\n    if (this.isLarge) {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].conceal();\n        this.modals[i].element.style.transition = 'none';\n      }\n    } else {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].element.style.transition = '';\n      }\n    }\n\n    if (this.shortcuts !== null) {\n      if (this.isLarge) {\n        if (this.searchBar !== null) this.tools.insertBefore(this.shortcuts, this.searchBar);\n        else this.tools.appendChild(this.shortcuts);\n      } else {\n        this.nav.insertBefore(this.shortcuts, this.navList);\n      }\n    }\n  }\n}\n\nexport { Header };\n","import api from './api.js';\nimport { Header } from './src/scripts/header/header';\n\napi.Header = Header;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { HEADER_SELECTOR } from './header/constants.js';\nimport { build } from './header/build.js';\n\nnew api.core.Initializer(HEADER_SELECTOR, [build]);\n","import { Header } from './header.js';\nimport { HEADER_SELECTOR } from './constants';\n\nconst build = () => {\n  const elements = Array.prototype.slice.call(document.querySelectorAll(HEADER_SELECTOR));\n\n  const headers = [];\n\n  for (const element of elements) headers.push(new Header(element));\n};\n\nexport { build };\n"],"names":["const","api","window","core","ns","name","prefix","selector","notation","undefined","attr","quoted","value","let","result","event","type","namespace","modifiyClass","element","className","remove","charAt","substr","classNames","split","index","indexOf","splice","push","join","addClass","removeClass","Renderer","this","closures","nexts","rendering","render","bind","add","closure","next","frame","requestAnimationFrame","call","shift","Engine","renderer","register","factory","start","stop","engine","Initializer","builders","instances","document","readyState","addEventListener","length","querySelectorAll","i","Instance","resizing","id","listeners","dispatch","data","CustomEvent","dispatchEvent","listen","unlisten","removeEventListener","resize","destroy","getInstances","instanceClass","filter","instance","GROUP_ATTR","groups","DisclosuresGroup","members","_index","_current","getGroupById","group","constructor","getGroupByElement","groupById","member","groupConstructor","getAttribute","groupByParent","GroupConstructor","groupSelector","parentElement","classList","contains","staticAccessors","setGroup","current","disclosed","primal","conceal","disclose","apply","hasFocus","DisclosureButton","disclosure","hasAttribute","attributeName","click","observer","MutationObserver","mutate","observe","attributes","e","change","mutations","forEach","mutation","disconnect","setAttribute","activeElement","DISCLOSE_EVENT","CONCEAL_EVENT","disclosures","Disclosure","super","buttons","_selector","modifier","ariaState","pristine","ariaControls","addButton","gather","build","from","Array","prototype","slice","prototypeAccessors","button","buttonFactory","withhold","preventFocus","focus","reset","_disclosed","canConceal","buttonHasFocus","some","DISCLOSURE_TYPES","expand","select","opened","KeyListener","collections","_add","action","KeyActionCollection","down","key","preventDefault","stopPropagation","KeyAction","up","dispose","types","actions","binding","handle","keyCode","TAB","ESCAPE","END","HOME","LEFT","UP","RIGHT","DOWN","COLLAPSE_CLASS","collapses","ascendants","Collapse","requesting","request","transitionend","unbound","gatherByAscendants","ascendant","style","maxHeight","adjust","requested","setProperty","height","offsetHeight","Equisized","elements","maxWidth","changing","tmpWWidth","_getWidth","width","el","offsetWidth","getComputedStyle","parseInt","marginLeft","marginRight","ACCORDIONS_GROUP","ACCORDION_ASCENDANT","AccordionsGroup","BREADCRUMB_COLLAPSE_SELECTOR","Breadcrumb","collapse","links","count","verify","matchMedia","matches","breadcrumbs","breadcrumbNodes","BUTTON_SELECTOR","BUTTONS_GROUP_SELECTOR","EQUISIZED_BUTTONS_GROUP_SELECTOR","arrayEquisized","MODAL_SELECTOR","MODAL_CLASS","NO_SCROLL_CLASS","SCROLL_SHADOW_CLASS","MODAL_BODY_SELECTOR","UNORDEREDS","ORDEREDS","isFocusable","container","visibility","display","FocusTrap","onTrap","onUntrap","waiting","wait","handling","trapped","trap","untrap","isTrapping","trapping","focusables","stunneds","stun","body","node","children","child","Stunned","first","last","shiftKey","tabIndex","unordereds","radios","documentElement","radio","RadioButtonGroup","unordered","tagName","toLowerCase","keep","ordereds","sort","a","b","noDuplicates","concat","removeAttribute","unstun","hidden","inert","checked","selected","ModalsGroup","initial","Modal","querySelector","scrollDistance","scrolling","init","keyListener","target","handleScroll","isScrollable","top","scroll","scrollY","isResizing","scrollHeight","clientHeight","scrollTop","innerHeight","NAVIGATION_CLASS","NAVIGATION_LIST_CLASS","NAVIGATION_ITEM_CLASS","NAVIGATION_ITEM_RIGHT_CLASS","NAVIGATION_MENU_CLASS","Navigation","menus","navList","focusOut","NavigationMenu","getBoundingClientRect","right","place","initialize","item","styles","parseFloat","left","SCHEME_ATTR","TRANSITION_ATTR","Scheme","scheme","localStorage","getItem","setItem","root","setTimeout","RADIOS_THEME_NAME","SWITCH_THEME_ID","THEME_ATTR","SwitchTheme","theme","isApplying","SIDEMENU_CLASS","SIDEMENU_LIST_CLASS","TABLE_SELECTOR","TABLE_SCROLLING_SELECTOR","SHADOW_CLASS","SHADOW_LEFT_CLASS","SHADOW_RIGHT_CLASS","WRAPPER_CLASS","CAPTION_BOTTOM_CLASS","Table","table","tableElem","tableContent","caption","captionHeight","wrap","newScroll","firstTimeScrollable","handleCaption","delete","marginTop","marginBottom","bottom","setShadowPosition","wrapperHtml","createElement","insertBefore","appendChild","tableInnerWrapper","tableScrollLeft","getScrollPosition","tableScrollRight","setShadowVisibility","side","inverter","scrollLeft","newHeight","scrollPosition","tables","tableNodes","TabButton","TABS_SELECTOR","TABS_CLASS","TAB_CLASS","PANEL_CLASS","LIST_CLASS","TabsGroup","list","transition","arrowRightPress","arrowLeftPress","homePress","endPress","translate","transform","tab","paneHeight","Math","round","panelHeight","Tab","direction","HEADER_SELECTOR","HEADER_TOOLS_SELECTOR","HEADER_SEARCH_BAR_SELECTOR","HEADER_SHORTCUTS_SELECTOR","HEADER_NAV_SELECTOR","HEADER_NAV_LIST_SELECTOR","Header","header","numId","modals","getModal","tools","searchBar","nav","shortcuts","isLarge","headers"],"mappings":"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"}