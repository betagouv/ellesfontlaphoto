{"version":3,"file":"header.module.min.js","sources":["../../packages/core/generated/scripts/config.js","../../packages/core/api.js","../../packages/header/src/scripts/header/constants.js","../../packages/header/src/scripts/header/header.js","../../packages/header/index.js","../../packages/header/src/scripts/module.js","../../packages/header/src/scripts/header/build.js"],"sourcesContent":["export const prefix = 'rf';\r\nexport const namespace = 'dsfr';\r\nexport const organisation = '@gouvfr';\r\n","import { namespace } from './generated/scripts/config.js';\n\nconst api = window[namespace] || { core: {} };\nwindow[namespace] = api;\nexport default api;\n","import api from '../../../api.js';\n\nexport const HEADER_SELECTOR = api.core.ns.selector('header');\nexport const HEADER_TOOLS_SELECTOR = api.core.ns.selector('header__tools');\nexport const HEADER_SEARCH_BAR_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.core.ns.selector('search-bar')}`;\nexport const HEADER_SHORTCUTS_SELECTOR = `${HEADER_TOOLS_SELECTOR} ${api.core.ns.selector('shortcuts')}`;\nexport const HEADER_NAV_SELECTOR = api.core.ns.selector('nav');\nexport const HEADER_NAV_LIST_SELECTOR = `${HEADER_NAV_SELECTOR} ${api.core.ns.selector('nav__list')}`;\n","import api from '../../../api.js';\nimport {\n  HEADER_NAV_LIST_SELECTOR,\n  HEADER_NAV_SELECTOR,\n  HEADER_SEARCH_BAR_SELECTOR,\n  HEADER_SELECTOR,\n  HEADER_SHORTCUTS_SELECTOR,\n  HEADER_TOOLS_SELECTOR\n} from './constants';\n\nlet count = 0;\n\nclass Header {\n  constructor (header) {\n    this.header = header || document.querySelector(HEADER_SELECTOR);\n    this.numId = count;\n    count++;\n    this.modals = [];\n\n    this.init();\n  }\n\n  getModal (element) {\n    if (!element) return;\n    const modals = api.core.Instance.getInstances(element, api.Modal);\n    if (!modals || !modals.length) return;\n    this.modals.push(modals[0]);\n  }\n\n  init () {\n    this.tools = this.header.querySelector(HEADER_TOOLS_SELECTOR);\n    this.getModal(this.tools);\n\n    this.searchBar = this.header.querySelector(HEADER_SEARCH_BAR_SELECTOR);\n\n    this.nav = this.header.querySelector(HEADER_NAV_SELECTOR);\n    this.getModal(this.nav);\n\n    this.shortcuts = this.header.querySelector(HEADER_SHORTCUTS_SELECTOR);\n\n    this.navList = this.header.querySelector(HEADER_NAV_LIST_SELECTOR);\n\n    this.changing = this.change.bind(this);\n\n    window.addEventListener('resize', this.changing);\n    this.change();\n  }\n\n  change () {\n    this.isLarge = window.matchMedia('(min-width: 62em)').matches;\n\n    if (this.isLarge) {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].conceal();\n        this.modals[i].element.style.transition = 'none';\n      }\n    } else {\n      for (let i = 0; i < this.modals.length; i++) {\n        this.modals[i].element.style.transition = '';\n      }\n    }\n\n    if (this.shortcuts !== null) {\n      if (this.isLarge) {\n        if (this.searchBar !== null) this.tools.insertBefore(this.shortcuts, this.searchBar);\n        else this.tools.appendChild(this.shortcuts);\n      } else {\n        this.nav.insertBefore(this.shortcuts, this.navList);\n      }\n    }\n  }\n}\n\nexport { Header };\n","import api from './api.js';\nimport { Header } from './src/scripts/header/header';\n\napi.Header = Header;\n","/* eslint-disable no-new */\nimport api from '../../api.js';\nimport { HEADER_SELECTOR } from './header/constants.js';\nimport { build } from './header/build.js';\n\nnew api.core.Initializer(HEADER_SELECTOR, [build]);\n","import { Header } from './header.js';\nimport { HEADER_SELECTOR } from './constants';\n\nconst build = () => {\n  const elements = Array.prototype.slice.call(document.querySelectorAll(HEADER_SELECTOR));\n\n  const headers = [];\n\n  for (const element of elements) headers.push(new Header(element));\n};\n\nexport { build };\n"],"names":["api","window","core","HEADER_SELECTOR","ns","selector","HEADER_TOOLS_SELECTOR","HEADER_SEARCH_BAR_SELECTOR","HEADER_SHORTCUTS_SELECTOR","HEADER_NAV_SELECTOR","HEADER_NAV_LIST_SELECTOR","count","Header","[object Object]","header","this","document","querySelector","numId","modals","init","element","Instance","getInstances","Modal","length","push","tools","getModal","searchBar","nav","shortcuts","navList","changing","change","bind","addEventListener","isLarge","matchMedia","matches","i","conceal","style","transition","insertBefore","appendChild","Initializer","elements","Array","prototype","slice","call","querySelectorAll","headers"],"mappings":";AACO,MCCDA,EAAMC,OAAgB,MAAK,CAAEC,KAAM,IACzCD,OAAgB,KAAID,ECDb,MAAMG,EAAkBH,EAAIE,KAAKE,GAAGC,SAAS,UACvCC,EAAwBN,EAAIE,KAAKE,GAAGC,SAAS,iBAC7CE,EAA6B,GAAGD,KAAyBN,EAAIE,KAAKE,GAAGC,SAAS,gBAC9EG,EAA4B,GAAGF,KAAyBN,EAAIE,KAAKE,GAAGC,SAAS,eAC7EI,EAAsBT,EAAIE,KAAKE,GAAGC,SAAS,OAC3CK,EAA2B,GAAGD,KAAuBT,EAAIE,KAAKE,GAAGC,SAAS,eCGvF,IAAIM,EAAQ,EAEZ,MAAMC,EACJC,YAAaC,GACXC,KAAKD,OAASA,GAAUE,SAASC,cAAcd,GAC/CY,KAAKG,MAAQP,EACbA,IACAI,KAAKI,OAAS,GAEdJ,KAAKK,OAGPP,SAAUQ,GACR,IAAKA,EAAS,OACd,MAAMF,EAASnB,EAAIE,KAAKoB,SAASC,aAAaF,EAASrB,EAAIwB,OACtDL,GAAWA,EAAOM,QACvBV,KAAKI,OAAOO,KAAKP,EAAO,IAG1BN,OACEE,KAAKY,MAAQZ,KAAKD,OAAOG,cAAcX,GACvCS,KAAKa,SAASb,KAAKY,OAEnBZ,KAAKc,UAAYd,KAAKD,OAAOG,cAAcV,GAE3CQ,KAAKe,IAAMf,KAAKD,OAAOG,cAAcR,GACrCM,KAAKa,SAASb,KAAKe,KAEnBf,KAAKgB,UAAYhB,KAAKD,OAAOG,cAAcT,GAE3CO,KAAKiB,QAAUjB,KAAKD,OAAOG,cAAcP,GAEzCK,KAAKkB,SAAWlB,KAAKmB,OAAOC,KAAKpB,MAEjCd,OAAOmC,iBAAiB,SAAUrB,KAAKkB,UACvClB,KAAKmB,SAGPrB,SAGE,GAFAE,KAAKsB,QAAUpC,OAAOqC,WAAW,qBAAqBC,QAElDxB,KAAKsB,QACP,IAAK,IAAIG,EAAI,EAAGA,EAAIzB,KAAKI,OAAOM,OAAQe,IACtCzB,KAAKI,OAAOqB,GAAGC,UACf1B,KAAKI,OAAOqB,GAAGnB,QAAQqB,MAAMC,WAAa,YAG5C,IAAK,IAAIH,EAAI,EAAGA,EAAIzB,KAAKI,OAAOM,OAAQe,IACtCzB,KAAKI,OAAOqB,GAAGnB,QAAQqB,MAAMC,WAAa,GAIvB,OAAnB5B,KAAKgB,YACHhB,KAAKsB,QACgB,OAAnBtB,KAAKc,UAAoBd,KAAKY,MAAMiB,aAAa7B,KAAKgB,UAAWhB,KAAKc,WACrEd,KAAKY,MAAMkB,YAAY9B,KAAKgB,WAEjChB,KAAKe,IAAIc,aAAa7B,KAAKgB,UAAWhB,KAAKiB,WChEnDhC,EAAIY,OAASA,ECEb,IAAIZ,EAAIE,KAAK4C,YAAY3C,EAAiB,CCF5B,KACZ,MAAM4C,EAAWC,MAAMC,UAAUC,MAAMC,KAAKnC,SAASoC,iBAAiBjD,IAEhEkD,EAAU,GAEhB,IAAK,MAAMhC,KAAW0B,EAAUM,EAAQ3B,KAAK,IAAId,EAAOS"}